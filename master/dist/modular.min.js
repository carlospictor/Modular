(function(e){var t={init:function(t){var n=e.extend({waypoints:"waypoints.min.js",mode:this.data("mode")?this.data("mode"):"auto",fetch:this.data("fetch"),target:this.data("target")?e(this.data("target")):this,placement:this.data("place")?this.data("place")=="replace"?this.data("place")+"With":this.data("place"):"after",loaded:this.data("loaded")?this.data("loaded"):false,offset:this.data("offset")?this.data("offset"):"100%"},t);return this.each(function(){function r(){if(!n.loaded){e.ajax({url:n.fetch,cache:true,success:function(e){n.target[n.placement](e);n.loaded=true},error:function(e,t,n){alert(t)}})}}var t=e(this);switch(n.mode){case"click":t.on("click",function(e){e.preventDefault();r()});break;case"viewport":e.ajax({url:n.waypoints,dataType:"script",cache:true,success:function(e){t.waypoint(function(){r()},{offset:n.offset})},error:function(e,t,n){alert(t)}});break;default:r();break}return false})}};e.fn.modular=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.modular")}}})(jQuery)